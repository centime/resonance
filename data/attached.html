<head>
    <title> Resonance - Attached pages</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="shortcut icon" type="image/x-icon" href="logo.png">
</head>
<link rel="stylesheet" type="text/css" href="attached.css">
<attached ng-app='attached' ng-controller='AttachedController'>
    <img id='logo_resonance' src='{{logoUrl}}'></img> <h1>Resonance - Attached pages.</h1>
     <ul class='flex_column'>
        <li ng-repeat='page in pages track by $index' class='page flex_column'>
            <page_infos class='flex_row'>
                <a href={{page.url}} target={{page.url}}>{{page.title}}</a>
                <button ng-show='display==0' ng-click="display=(display==0)?1:0"> Show </button>
                <button ng-show='display==1' ng-click="display=(display==0)?1:0"> Hide </button>
                <button ng-click='detach(page)'>Detach</button>
            </page_infos>
            <page_utils class='flex_row'>
                <messages ng-show='display==1' ng-controller='AttachedMessagesController' class='flex_column'>
                    <ul class='list' id='resonance_messages'>
                        <li ng-repeat='message in messages track by $index'>
                              {{message.author}}: {{message.message}}<br>
                        </li>
                    </ul>
                    <form ng-submit='submitNewMessage()'>
                        <input type='text' ng-model='newMessage'/>
                    </form>
                </messages>
                <users ng-show='display==1' ng-controller='AttachedUsersController' class='flex_column'>
                    <ul class='list'>
                        <li ng-repeat='user in users track by $index'>
                            {{user}}<br>
                        </li>
                    </ul>
                </users>
            </page_utils>
        </li>
    </ul>
</attached>
