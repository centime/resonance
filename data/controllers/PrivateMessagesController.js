// Generated by CoffeeScript 1.6.2
(function() {
  window.app.controller("PrivateMessagesController", function($scope) {
    var elmt;

    $scope.messages = [];
    $scope.newMessage = '';
    elmt = angular.element('privatemessages > ul');
    $scope.submitNewMessage = function() {
      var msg;

      msg = $scope.newMessage;
      if (msg !== '') {
        self.port.emit('pm', 'Resonance-bot', msg);
      }
      return $scope.newMessage = '';
    };
    return self.port.on("pm", function(from, message) {
      var text;

      text = from + ' : ' + message;
      $scope.messages.push(text);
      $scope.$apply();
      return elmt.animate({
        scrollTop: elmt.prop('scrollHeight')
      }, 1000);
    });
  });

}).call(this);
