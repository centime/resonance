// Generated by CoffeeScript 1.4.0
(function() {

  window.resonance.controller("NotificationsController", function($scope) {
    var elmt, scrollDown;
    $scope.notifications = [];
    $scope.announce = '';
    self.port.on("notificationsHistory", function(notificationsHistory) {
      var notification;
      $scope.notifications = (function() {
        var _i, _len, _results;
        _results = [];
        for (_i = 0, _len = notificationsHistory.length; _i < _len; _i++) {
          notification = notificationsHistory[_i];
          _results.push({
            'type': notification.type,
            'notification': notification.message,
            'old': notification.old
          });
        }
        return _results;
      })();
      $scope.$apply();
      return scrollDown();
    });
    self.port.on('notification', function(notification) {
      $scope.notifications.push(notification);
      $scope.$apply();
      return scrollDown();
    });
    self.port.on('announce', function(announce) {
      $scope.announce = announce;
      return $scope.$apply();
    });
    $scope["class"] = function(notification) {
      return {
        'old_message_resonance': notification.old
      };
    };
    elmt = angular.element('notifications_resonance > ul');
    return scrollDown = function() {
      return elmt.animate({
        scrollTop: elmt.prop('scrollHeight')
      }, 1000);
    };
  });

}).call(this);
